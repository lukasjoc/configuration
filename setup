#!/bin/bash
set -e

declare -a dotfiles

dotfiles=(
	".profile"
	".bash_profile"
	".bashrc"
	".tmux.conf"
	".inputrc"
	".gitconfig"
	".dir_colors"
	".Xresources"
)

# Basic Config
echo "Linking dotfiles..."
for file in "${dotfiles[@]}"; do
	ln -sf "$PWD/$file" "$HOME/$file"
done

if [[ "$1" == "--complete" ]]; then

	echo "Linking vim files..."
	# Setup Vimrc
	ln -sf "$PWD/.vimrc" "$HOME/.vimrc"
	ln -sf "$PWD/.gvimrc" "$HOME/.gvimrc"
	
	echo "Pulling package manager and color scheme..."
	
	# vim-plug
	curl -flo "$HOME/.vim/autoload/plug.vim" --create-dirs \
	    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim

	# Unicon Scheme
	# curl -flo "$HOME/.vim/colors/unicon.vim" --create-dirs \
	# 	https://raw.githubusercontent.com/lukasjoc/vim-unicon/master/colors/unicon.vim

	# Skelets
	echo "Linking vim skelet files... "
	[[ -d $HOME/.vim/skels ]] || mkdir "$HOME/.vim/skels"
	for skel in .vim/skels/skel*; do ln -sf "$PWD/$skel" "$HOME/$skel"; done
	for bin in .local/bin/*; do ln -sf "$PWD/$bin" "$HOME/$bin"; done




	echo "Linking .configs..."
	# Alacrity
	mkdir -p "$HOME/.config/alacritty"|| true
	ln -sf "$PWD/.config/alacritty/alacritty.yml" "$HOME/.config/alacritty/alacritty.yml"
	
	# Neofetch
	mkdir -p "$HOME/.config/neofetch" || true
	ln -sf "$PWD/.config/neofetch/config.config" "$HOME/.config/neofetch/config.conf"

	echo "DONE.. Open Vim and type  ESC + :PlugInstall"
fi

